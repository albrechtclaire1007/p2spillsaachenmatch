<!DOCTYPE html>
<html lang="lb">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Spillsaachen – Lauschter a klick!</title>
  <style>
    @font-face {
      font-family: 'Schoulschreft';
      src: url('https://github.com/albrechtclaire1007/schoulschreft/raw/main/schoulschreft_bold%5B2%5D.TTF') format('truetype');
      font-weight: bold;
    }

    html, body { height: 100%; margin: 0; }
    body {
      font-family: 'Schoulschreft', Arial, sans-serif;
      background: linear-gradient(135deg, #d8ebd4 0%, #8cc987 100%);
      display: grid;
      place-items: center;          /* centers the white box */
      padding: 20px;
      box-sizing: border-box;
      user-select: none;
    }

    /* White box (centered) */
    .game-container {
      width: min(100%, 1000px);
      min-height: clamp(520px, 80vh, 900px);
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 8px 25px rgba(0,0,0,.1);
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 14px;
    }

    h1 { margin: 0 0 8px; text-align: center; color: #000; }

    /* Audio image (no button element) */
    .audio-img {
      width: 72px;
      height: 72px;
      display: block;
      cursor: pointer;
      -webkit-user-drag: none;
      transition: transform .15s ease;
    }
    .audio-img:active { transform: scale(0.97); }
    .audio-img[aria-disabled="true"] { opacity: .5; pointer-events: none; }

    .feedback { font-size: 22px; font-weight: bold; color: #333; min-height: 28px; text-align: center; }
    .success { color: #4CAF50; }
    .finished { font-size: 26px; color: #4CAF50; margin-top: 6px; text-align: center; }

    .grid {
      width: 100%;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 16px;
      align-items: stretch;
      margin-top: 6px;
    }

    .toy-card {
      background:#fff; border-radius:15px; overflow:hidden;
      box-shadow:0 4px 10px rgba(0,0,0,.1);
      transition: all .25s ease; cursor: pointer;
    }
    .toy-card img { width:100%; height:120px; object-fit:contain; background:#f8f8f8; display:block; }
    .toy-card.flash { border:4px solid #8cc987; background:#d8ebd4; }
    .toy-card.wrong { border:4px solid #ff6b6b; background:#ffe0e0; animation:shake .4s ease; }

    @keyframes shake {
      0%,100% { transform: translateX(0) }
      25% { transform: translateX(-5px) }
      75% { transform: translateX(5px) }
    }

    /* Fill-iframe helpers (optional; safe to keep) */
    .container, .wrapper, #app, main { max-width: none !important; }

    @media (max-width: 600px) {
      .audio-img { width: 64px; height: 64px; }
      .toy-card img { height: 100px; }
    }
  </style>
</head>
<body>
  <div class="game-container" id="gameBox">
    <h1>Lauschter a klick op déi richteg Spillsaach!</h1>

    <!-- Only the image (clickable) -->
    <img
      id="audioImg"
      class="audio-img"
      src="https://i.postimg.cc/kXzQdjQp/temp-Imagef0iu-HC.avif"
      alt="Toun nei ofspillen"
      role="button"
      tabindex="0"
    >

    <div class="feedback" id="feedback">Klick op de Lautsprecher</div>
    <div class="grid" id="grid"></div>
  </div>

  <audio id="audio" preload="auto" playsinline></audio>

  <script>
    // --- Data ---
    const toys = [
      { name: 'Kaartespill', image: 'https://i.postimg.cc/VSxkQyb8/temp-Image2t-Ew-Ew.avif', audio: 'https://github.com/albrechtclaire1007/p1spillsaachen/raw/main/1kaarte.mp3' },
      { name: 'Popp',        image: 'https://i.postimg.cc/7CFZ8vTw/temp-Imagee-DSUs6.avif', audio: 'https://github.com/albrechtclaire1007/p1spillsaachen/raw/main/1popp.mp3' },
      { name: 'Péssel',      image: 'https://i.postimg.cc/XB3NqwL4/temp-Image-Jgec-Ta.avif', audio: 'https://github.com/albrechtclaire1007/p1spillsaachen/raw/main/1pesel.mp3' },
      { name: 'Trommel',     image: 'https://i.postimg.cc/p9wLbNnb/temp-Image-MIU98-V.avif', audio: 'https://github.com/albrechtclaire1007/p1spillsaachen/raw/main/1trommel.mp3' },
      { name: 'Fliger',      image: 'https://i.postimg.cc/DW9wkVb3/temp-Image-NAjh-GW.avif', audio: 'https://github.com/albrechtclaire1007/p1spillsaachen/raw/main/1fliger.mp3' },
      { name: 'Teddybier',   image: 'https://i.postimg.cc/dkGtJW8B/temp-Imagep2-X0pu.avif', audio: 'https://github.com/albrechtclaire1007/p1spillsaachen/raw/main/teddybier1.mp3' },
      { name: 'Videospill',  image: 'https://i.postimg.cc/tZFC9rhF/temp-Image-PC26-QV.avif', audio: 'https://github.com/albrechtclaire1007/p1spillsaachen/raw/main/1video.mp3' },
      { name: 'Ball',        image: 'https://i.postimg.cc/G8vhbMkx/temp-Image-SMSSD4.avif', audio: 'https://github.com/albrechtclaire1007/p1spillsaachen/raw/main/1ball.mp3' },
      { name: 'Vëlo',        image: 'https://i.postimg.cc/Q9cxj6pq/temp-Imagev-ZAm8p.avif', audio: 'https://github.com/albrechtclaire1007/p1spillsaachen/raw/main/1velo.mp3' },
      { name: 'Radio',       image: 'https://i.postimg.cc/xNYj8K5f/temp-Image-W250-J5.avif', audio: 'https://github.com/albrechtclaire1007/p1spillsaachen/raw/main/1radio.mp3' },
      { name: 'Roboter',     image: 'https://i.postimg.cc/vxM8TWhR/temp-Image-Xr-Gmf-G.avif', audio: 'https://github.com/albrechtclaire1007/p1spillsaachen/raw/main/1roboter.mp3' },
      { name: 'Wierfel',     image: 'https://i.postimg.cc/vxM8TWhy/temp-Image-Zp-G0-TR.avif', audio: 'https://github.com/albrechtclaire1007/p1spillsaachen/raw/main/1wierfel.mp3' }
    ];

    // --- Elements ---
    const grid = document.getElementById('grid');
    const feedback = document.getElementById('feedback');
    const audioImg = document.getElementById('audioImg');
    const audioEl = document.getElementById('audio');

    // --- State ---
    let remaining = [];
    let current = null;
    let started = false;
    let unlocked = false;

    // --- Helpers ---
    const shuffle = (arr) => arr.sort(() => Math.random() - 0.5);

    function loadGrid() {
      grid.innerHTML = '';
      shuffle([...toys]).forEach(t => {
        const card = document.createElement('div');
        card.className = 'toy-card';
        card.innerHTML = `<img src="${t.image}" alt="${t.name}">`;
        card.addEventListener('click', () => handleChoice(t, card));
        grid.appendChild(card);
      });
    }

    function startGame() {
      if (started) return;
      started = true;
      feedback.textContent = 'Wat hues du héieren?';
      remaining = shuffle([...toys]);
      playNextAudio(); // start immediately on first gesture
    }

    function tryUnlockAudio() {
      if (unlocked) return;
      audioEl.muted = true;
      audioEl.play().then(() => {
        audioEl.pause(); audioEl.currentTime = 0;
        audioEl.muted = false;
        unlocked = true;
      }).catch(() => { /* ignore; gesture playback will still work */ });
    }

    function playNextAudio() {
      if (remaining.length === 0) {
        feedback.textContent = 'Super, du hues alles richteg geléist!';
        feedback.className = 'finished';
        audioImg.setAttribute('aria-disabled', 'true');
        return;
      }
      current = remaining.pop();
      audioEl.src = current.audio;

      // If unlocked, play immediately; otherwise this call is still tied to user gesture if startGame was triggered by click/touch.
      const p = audioEl.play();
      if (p && typeof p.catch === 'function') p.catch(() => {/* silently ignore */});
    }

    function handleChoice(toy, card) {
      if (!started || !current) return;
      if (toy.name === current.name) {
        card.classList.add('flash');
        feedback.textContent = 'Super!';
        feedback.classList.add('success');
        setTimeout(() => {
          card.classList.remove('flash');
          feedback.classList.remove('success');
          playNextAudio();
        }, 650);
      } else {
        card.classList.add('wrong');
        feedback.textContent = 'Nach eng Kéier probéieren!';
        setTimeout(() => card.classList.remove('wrong'), 350);
      }
    }

    // --- Wire up gestures to start + unlock ---
    const startAndUnlock = () => { startGame(); tryUnlockAudio(); };

    ['pointerdown','click','touchstart','keydown','focus']
      .forEach(evt => document.addEventListener(evt, startAndUnlock, { passive: true }));

    audioImg.addEventListener('click', (e) => {
      if (!started) { startAndUnlock(); return; }
      // Replay current audio
      if (current) {
        audioEl.currentTime = 0;
        const p = audioEl.play();
        if (p && typeof p.catch === 'function') p.catch(() => {});
      }
    });

    audioImg.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        audioImg.click();
      }
    });

    // Init UI
    loadGrid();
  </script>
</body>
</html>

